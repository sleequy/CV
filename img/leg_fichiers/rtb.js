!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){const n={config:{},normaliseConfig:function(e,t){this.config=this.reconcileAttributes(Object.assign(Object.assign({autoDiscover:{},funnel:!1,brandSlug:"",module:"",uaSuivi:"",campaignId:"",blockSt:!0,ifa:"",storeId:"",customData:"",popup:{enabled:!1,domainConfig:{domain:"",css:""}},consentString:"",pageEvents:{urls:{whitelist:[],blacklist:[]},referrers:{blacklist:[]}},submitEvents:{submitForms:{whitelist:[]},submitLinks:{whitelist:[]}}},e),t))},reconcileAttributes:e=>(e.gdpr_consent&&(e.consentString=e.gdpr_consent,delete e.gdpr_consent),e),getConfigFromScriptSrc:function(e){if(""===e)return{};const t=new URL(e),n=new URLSearchParams(t.search).entries(),i={};for(const e of n)i[e[0]]=e[1];return i}};e.exports=n},function(e,t,n){const i=n(7).sha256,o={hasSameStringValues:function(e,t){for(const n in e){const i=e[n],o=t[n];if(void 0===i||void 0===o||i.toString()!==o.toString())return!1}return!0},valueIsContainedInCurrentLocation:function(e,t){return-1!==(t.hostname+t.pathname).indexOf(e)},isAllowedLocationInConfig:function(e,t){return void 0!==e.whitelist?e.whitelist.filter(e=>this.valueIsContainedInCurrentLocation(e.url,t)).length>0:void 0!==e.blacklist?0===e.blacklist.filter(e=>this.valueIsContainedInCurrentLocation(e.url,t)).length:void 0},encrypt:e=>window.stE2Etests?e:i(e),appendContextDataIfOnScreen(e,t){const n=this.getContextDataFromDom(t),i=n.length>0?n:[];return e.concat(i)},getContextDataFromDom(e){return e.reduce((e,t)=>e.concat(Array.from(document.querySelectorAll(t.selectors)).map(e=>{const n={name:t.label+"_"+e.className.toLowerCase().replace(/[\W]/g,"_"),value:this.formatContextData(e.innerText)};return"checkbox"!==e.type&&"radio"!==e.type||(n.checked=e.checked),n})),[])},formatContextData(e){const t=["€"];return t.filter(t=>e.search(t)>-1).length===t.length?this.formatPriceToFloat(e):e},formatPriceToFloat:e=>e.replace("€","").replace(",",".").replace(/\s/g,"").replace(/[^\d.]/,""),normalizePhoneNumber(e,t,n){let i=e;const o=new RegExp(`^${t}`),r=new RegExp(`^${n}`);return i=i.replace(/^00/g,"+"),i=i.replace(/[^\d+]+/g,""),i=i.replace(r,"+"+t),i.match(o)&&(i="+"+i),i.match(/^\+/)||(i="+"+t+i),i},concatIfNotEmpty:(e,t,n="-")=>e&&t?e+n+t:!e&&t?t:e&&!t?e:e||t?void 0:"",getAudienceScriptSource(){const e=document.getElementsByTagName("script");for(const t of e)if(-1!==t.src.indexOf("localhost")||-1!==t.src.indexOf("audience-static"))return t.src;return""}};e.exports=o},function(e,t,n){const i=n(4),o=n(12),r=n(1),s=n(0),a={createEvent(e,t){const n=new Date,i=e=>e<10?"0"+e:e,o=n.getUTCFullYear()+"-"+i(n.getUTCMonth()+1)+"-"+i(n.getUTCDate())+" "+i(n.getUTCHours())+":"+i(n.getUTCMinutes())+":"+i(n.getUTCSeconds());return Object.assign({brand_slug:s.config.brandSlug,module:s.config.module,campaign_id:s.config.campaignId,client_id:t.clientId,session_id:t.sessionId,created_at:o,consent_string:r.concatIfNotEmpty(s.config.consentString,window.localStorage.getItem("audience_device_id_cs"))},e)},getEventSendConditions(e,t){const n=!!e,i=0===s.config.pageEvents.urls.whitelist.length,o=!!s.config.pageEvents.urls.whitelist.filter(e=>-1!==t.URL.indexOf(e)).length,r=!!s.config.pageEvents.urls.blacklist.filter(e=>-1!==t.URL.indexOf(e)).length,a=!!s.config.pageEvents.referrers.blacklist.filter(e=>-1!==t.referrer.indexOf(e)).length;return{shouldAutodiscover:s.config.shouldAutodiscover,shouldSendEventPage:!n||!i&&o||i&&!r&&!a,shouldSetupFormLinkListeners:!!s.config.submitEvents.submitLinks.whitelist.filter(e=>-1!==t.URL.indexOf(e.url)).length,shouldSetupFormSubmitListeners:!!s.config.submitEvents.submitForms.whitelist.filter(e=>-1!==t.URL.indexOf(e.url)).length}},infoPage:function(){return{url:window.location.href,referer:""===document.referrer?void 0===window.sessionStorage.audience_referrer?"":window.sessionStorage.audience_referrer:window.document.referrer,ip:"",ifa:r.concatIfNotEmpty(s.config.ifa,window.localStorage.getItem("audience_device_id")),user_agent:window.navigator.userAgent,store_id:s.config.storeId,custom_data:s.config.customData}},infoGeoloc:function(e,t,n,i){return{geolocation_type:e.toLowerCase(),latitude:t?parseFloat(t.toFixed(i)):0,longitude:n?parseFloat(n.toFixed(i)):0,ip:""}},infoSubmitEvent:function(e,t,n){const a=t.filter(e=>(e instanceof HTMLInputElement||e instanceof HTMLSelectElement)&&!o.inputIsBlacklisted(e)&&!o.valueIsFake(e.value)&&o.elemIsAllowedInConfiguration(e,n)).map(e=>i.parseInput(e));return{id:e,form:r.appendContextDataIfOnScreen(a,n.contextContainerSelectors),store_id:s.config.storeId,custom_data:s.config.customData}},autoDiscoverEvent:(e,t={})=>({auto_discovered:!0,id:e,form:Object.keys(t).filter(e=>null!==t[e]).map(e=>{const n=i.parseInput(t[e]);return n.type=e,n}),store_id:s.config.storeId,custom_data:s.config.customData})};e.exports=a},function(e,t){const n={post(e,t,n=!0,i=!1){!0===i&&navigator.sendBeacon?navigator.sendBeacon(t,JSON.stringify(e)):window.fetch?window.fetch(t,{method:"POST",body:JSON.stringify(e),keepalive:!0,redirect:"follow"}):this._xhrPost(e,t,n)},_xhrPost:function(e,t,n){const i=this._getHttpRequest();if(!1===i)return!1;i.open("POST",t,n),n||(i.timeout=500),i.setRequestHeader("X-Requested-With","xmlhttprequest"),i.setRequestHeader("Content-Type","application/ld+json"),i.setRequestHeader("Accept","application/ld+json"),i.send(e)},_getHttpRequest:function(){if(window.XMLHttpRequest){const e=new XMLHttpRequest;return e.overrideMimeType&&e.overrideMimeType("application/json"),e}if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){return!1}}return!1}};e.exports=n},function(e,t,n){const i=n(1),o=n(0),r={parseInput:function(e){const t=(""!==e.name?e.name:e.id).replace(/[\W]/g,"_");let n=e.value.toLowerCase().trim();/^\+?\d+$/.test(n.replace(/\s|-/g,""))&&n.length>9&&(n=i.normalizePhoneNumber(n,o.config.countryCode,o.config.leadingZeroes));const r={name:t,value:i.encrypt(n)};return"checkbox"!==e.type&&"radio"!==e.type||(r.checked=e.checked),r},addDivAdBanner:function(){const e=document.createElement("div");e.setAttribute("id","adsbox"),e.innerHTML="&nbsp;",window.document.body.appendChild(e)},initHiddenPopupHtml(e,t,n){const i=window.document.createElement("div"),r=document.createElement("style");return i.id=e,i.className="okube__pop-in--container",i.innerHTML='\n    <div class="okube__pop-in">\n        <p>Acceptez-vous de nous aider à mesurer l\'impact de nos modules en ligne sur nos visites en magasin ?</p>\n        <p>Si oui, notre partenaire pourra accéder et / ou stocker des cookies et traiter vos données personnelles accessibles au sein de votre navigateur, ainsi qu\'effectuer des liaisons d\'appareil et des matches de données hors ligne, <strong>à des fins de mesure uniquement</strong></p>\n        <p><a href="https://okube-attribution.com/politique-de-confidentialite/" target="_blank">Plus de détails sur notre politique de confidentialité</a></p>\n        <button class="accept" id="okube__accept">Accepter</button>\n        <button class="decline" id="okube__decline">Refuser</button>\n    </div>',r.innerHTML=o.config.popup.domainConfig.css,document.getElementsByTagName("head")[0].appendChild(r),window.document.body.appendChild(i),window.document.getElementById("okube__accept").onclick=t,window.document.getElementById("okube__decline").onclick=n,i},initHiddenPictoPrefHtml(e,t){const n=window.document.createElement("div");return n.id=e,n.className="okube__opener--container",n.innerHTML='\n    <button class="open__pop-in" id="okube__shortcut">\n      <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEkAAABJCAMAAABGrfvuAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAHtQTFRFAAAAAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFAMjFVScyHwAAACl0Uk5TAD9/Tx8vb7Dg/8CQDzCgYBDwIIBQ0HBAC1mRsiKoQ2WGX5wWe7XDTpdVkhf0AAADUklEQVR4nJ1Yf4ObIAxtd7upOBVEtKvt3Xa7dfv+n3CiBMJv7fvjrq34SF5CgJxOaZzPX1a8nL9mRibw+q0oKwxSv3w/TtO0Ngug6OgRGtqFaVawtt9NxFmcZ8VOriFhj+HK+0iLHTzSxyFnkO2YqMepWR9MAy/sZ2mzajzUD1NTY89FE/esRdbzsKoTQWNiVFQgnrjpmKvLERXpKCMxg1R6KhaeCU+qAxxyUGuUENJgjFPpR2LfuupYZHxzkGh5A6ha+3dxlGiJIUxuZTs/TrQ4CFKhl/pcqrm4rH9hRdTmAQRVhT9bM8Yf23/QRL8AHhfqe8a0y3VWTBAnLbpKJQbU6dy83Wdg0vqqN0ElDmPxZw9vC5FmoswyqnZDsD6LRPF9nhETGMW2Pad0IxBPiMvP2WYCo37JLyBbbzNVpa/77WN2mEDjAjlHTg6TX6pXiRwmsEO6J6xcQkxVNQYkcphAm2VW6jlnmPDqBIkkrr/N77VWWaVliSYfDZXWXUu0wDJ10OJwb3ZUMXTdMxLN9zfLZ/BJi2+nIt4cJlui6+1kg4HkqnxPznO0YXWXT+TZxRkIBGcInctkymtV/Yl5tqIAJjXaz+hG77ePqGcSHDJGC+aBEofp0/MMMfEEk84VxfQ3OGYfk9ptV6aPkGchJk/xDY1QTGHPkOEc0iHCtG7cj6hnEkrNAT7E6y2vHveYZxICskAx1fGh07+oZxJKnlcQjKQGpwAbk9lJ/VkSQKtUFQ5hit7wJJNSR9YSe6M5ygRFRUZMrUD2HBNURXnTAqG6p5jUMi+xfeIZJojclkRwUpmeYIJysV0jVU03mwLPYnJMgmyEkmZvbztA4U3QWB/z9l8BN9SuN9ookXgrAH1mNWEHo9wTcRo9CxhAfPYszJ6Ia5s+2O+nMkR2QeJHqQxR6Wxw5tIWP2Ii9Ga7dw9s1NxLi/xFYUrd8ND5pIxtDzArui6Hoo2o0q0F3FAIpw2mil2oFx50DY7mX2M1BNpAb6EfrQZHPJEbuxHC2g4Fhk5cWI+TUaakckFIu5QRQrxuS64fMub6PHqGbOHofbMCYLtq2Y620Y6m0YZUS+xYU2xZDm2MR4yHGnUL6BDo+ZHxaIFW6AfeEiKjKQjhXXo5/gdbRWtU2Bw5+QAAAABJRU5ErkJggg==">\n    </button>',window.document.body.appendChild(n),window.document.getElementById("okube__shortcut").onclick=t,n},putTapadPixelOnDom(e){const t=window.document.createElement("img");t.setAttribute("id","pxl-tpd"),t.setAttribute("src","https://pixel.tapad.com/idsync/ex/receive?partner_id=3212&partner_device_id="+e.clientId+"&gdpr=1&gdpr_consent="+o.config.consentString),t.setAttribute("style","display:none;"),window.document.body.appendChild(t)}};e.exports=r},function(e,t,n){const i=n(16),o={createCookie(e,t,n){const i=window.location.hostname;let o=i.substring(i.lastIndexOf(".",i.lastIndexOf(".")-1)+1);"localhost"!==o&&(o="."+o);let r="";if(n){const e=new Date;e.setTime(e.getTime()+1e3*n),r="; expires="+e.toUTCString()}return document.cookie=e+"="+t+r+"; domain="+o+"; path=/",t},readCookie(e){const t=e+"=",n=document.cookie.split(";");for(let e=0;e<n.length;e++){let i=n[e];for(;" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},initOrGetUuidV4(e,t,n){const o=this.readCookie(t),r=e.getItem(t);if(!o&&!r){const o=i();return e.setItem(t,o),this.createCookie(t,o,n),o}return o&&!r?(e.setItem(t,o),o):!o&&r?(this.createCookie(t,e[t],n),r):r},saveSDKInfo:function(e){const t=e.split("}")[0]+"}",n=JSON.parse(t),i=n.advertiser_id,o=n.consent_string;window.localStorage.setItem("audience_device_id",i),window.localStorage.setItem("audience_device_id_cs",o)},isLastPageAlreadySent:function(e){return null!==localStorage.getItem("st_audience_lps")&&localStorage.getItem("st_audience_lps")===e||(localStorage.setItem("st_audience_lps",e),!1)}};e.exports=o},function(e,t,n){const i=n(0),o=n(4),r=n(11),s=n(5),a=n(2),c=n(3),u=n(19),l=n(1);window.stAudience={launchApp(e){0===Object.keys(i.config).length&&i.normaliseConfig(e,{apiEndpointHostname:"https://audience-api.wts-okube.com",clientName:"RTB",consentStringCookieName:"",countryCode:"33",leadingZeroes:"0",pageEvents:{referrers:{blacklist:[""]},urls:{blacklist:[],whitelist:[""]}},submitEvents:{submitForms:{whitelist:[]},submitLinks:{whitelist:[]}},tcfapi:{enabled:!0},xandr:{autoRemove:!0,brandSlug:"sync-xandr",enabled:!0,module:"pview"}});try{if(!0===window.parent.stAudienceHasLoaded&&"true"!==s.readCookie("st_audience_popup"))return;window.parent.stAudienceHasLoaded=!0}catch(e){if(!0===window.stAudienceHasLoaded&&"true"!==s.readCookie("st_audience_popup"))return;window.stAudienceHasLoaded=!0}if("seat"===i.config.brandSlug)return;if("orange"===i.config.brandSlug)return;if(i.config.popup.enabled&&l.valueIsContainedInCurrentLocation(i.config.popup.domainConfig.domain,window.location)){if(null===s.readCookie("st_audience_popup"))return void this.launchConsentPopup();if("true"!==s.readCookie("st_audience_popup"))return;this.launchConsentPopup()}i.config.clientId&&window.localStorage.setItem("st_audience_clientId",i.config.clientId);const t={clientId:s.initOrGetUuidV4(window.localStorage,"st_audience_clientId",33696e3),sessionId:s.initOrGetUuidV4(window.sessionStorage,"st_audience_sessionId",900)};if(""===i.config.consentString&&""!==i.config.consentStringCookieName){let e=s.readCookie(i.config.consentStringCookieName)||"true";-1!==e.indexOf("GA1.2.")&&(e=e.replace("GA1.2.","")),-1!==e.indexOf("undefined")&&(e=""),i.config.consentString=e}"boolean"==typeof i.config.consentString&&(i.config.consentString=i.config.consentString.toString()),this.sendSfbxReconciliation(t),i.config.partner1&&i.config.partner1.enabled&&o.putTapadPixelOnDom(t),u.checkIfHasGA()&&u.initGA();const n=a.getEventSendConditions(s.readCookie("st_audience_sessionId")||window.sessionStorage.getItem("st_audience_sessionId"),window.document);if(n.shouldSendEventPage){if(i.config.tcfapi&&i.config.tcfapi.enabled&&void 0!==window.__tcfapi)__tcfapi("addEventListener",2,(function(e,n){if(n&&e.gdprApplies&&("tcloaded"===e.eventStatus||"useractioncomplete"===e.eventStatus)&&e.purpose.consents)for(var o in e.purpose.consents)if(e.purpose.consents[o]){void 0!==e.tcString&&""!==e.tcString&&(i.config.consentString=e.tcString);const n=a.createEvent(a.infoPage(),t);i.config.xandr&&r.setupXandrPixel(n),s.isLastPageAlreadySent(window.location.href)||c.post(n,i.config.apiEndpointHostname+"/event/page")}}));else{const e=a.createEvent(a.infoPage(),t);c.post(e,i.config.apiEndpointHostname+"/event/page")}u.sendGaPageViewEvent()}r.setupGeolocListener(t),n.shouldSetupFormSubmitListeners&&r.setupAllowedFormListener(t),n.shouldSetupFormLinkListeners&&r.setupAllowedSubmitLinkListeners(t),!0===n.shouldAutodiscover&&r.setupAutoDiscoverInputs(t),i.config.funnel&&r.setupFunnelListeners(t)},launchConsentPopup(){const e="okube__pop-in--container",t="okube__opener--container";let n=!0;o.initHiddenPopupHtml(e,()=>{s.createCookie("st_audience_popup",!0,33696e3),document.getElementById(e).classList.toggle("okube__pop-in--visible"),n&&(this.launchApp(),n=!1)},()=>{s.createCookie("st_audience_popup",!1,33696e3),document.getElementById(e).classList.toggle("okube__pop-in--visible")}),o.initHiddenPictoPrefHtml(t,()=>{document.getElementById(e).classList.toggle("okube__pop-in--visible"),document.getElementById(t).classList.toggle("okube__opener--visible")}),"true"===s.readCookie("st_audience_popup")?document.getElementById(t).classList.toggle("okube__opener--visible"):(s.createCookie("st_audience_popup",!1,33696e3),document.getElementById(e).classList.toggle("okube__pop-in--visible"))},sendSfbxReconciliation(e){if(void 0!==i.config.partner2&&i.config.partner2.enabled){if(i.config.popup.enabled&&l.valueIsContainedInCurrentLocation(i.config.popup.domainConfig.domain,window.location)&&"true"!==s.readCookie("st_audience_popup")||void 0!==i.config.partner2.url&&i.config.partner2.url.whitelist!==[]&&0===i.config.partner2.url.whitelist.filter(e=>l.valueIsContainedInCurrentLocation(e,window.location)).length)return;c.post({AppconsentID:e.clientId,buildId:720,data:{maid:e.clientId,maidType:"idfa",timestamp:Date.now?Date.now():(new Date).getTime(),cst:1,slugbrand:i.config.brandSlug}},"https://collector.appconsent.io/ship")}},sendPageEvent(e={}){e!=={}&&Object.assign(i.config,e);const t={clientId:s.initOrGetUuidV4(window.localStorage,"st_audience_clientId",33696e3),sessionId:s.initOrGetUuidV4(window.sessionStorage,"st_audience_sessionId",900)},n=a.createEvent(a.infoPage(),t);c.post(n,i.config.apiEndpointHostname+"/event/page")}};const d=l.getAudienceScriptSource(),h=i.getConfigFromScriptSrc(d);"true"===h.autoLaunch&&window.stAudience.launchApp(h)},function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;
/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */!function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__(10),ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e,t){return function(n){return new Sha256(t,!0).update(n)[e]()}},createMethod=function(e){var t=createOutputMethod("hex",e);NODE_JS&&(t=nodeWrap(t,e)),t.create=function(){return new Sha256(e)},t.update=function(e){return t.create().update(e)};for(var n=0;n<OUTPUT_TYPES.length;++n){var i=OUTPUT_TYPES[n];t[i]=createOutputMethod(i,e)}return t},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(e){if("string"==typeof e)return crypto.createHash(algorithm).update(e,"utf8").digest("hex");if(null==e)throw new Error(ERROR);return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod},createHmacOutputMethod=function(e,t){return function(n,i){return new HmacSha256(n,t,!0).update(i)[e]()}},createHmacMethod=function(e){var t=createHmacOutputMethod("hex",e);t.create=function(t){return new HmacSha256(t,e)},t.update=function(e,n){return t.create(e).update(n)};for(var n=0;n<OUTPUT_TYPES.length;++n){var i=OUTPUT_TYPES[n];t[i]=createHmacOutputMethod(i,e)}return t};function Sha256(e,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function HmacSha256(e,t,n){var i,o=typeof e;if("string"===o){var r,s=[],a=e.length,c=0;for(i=0;i<a;++i)(r=e.charCodeAt(i))<128?s[c++]=r:r<2048?(s[c++]=192|r>>6,s[c++]=128|63&r):r<55296||r>=57344?(s[c++]=224|r>>12,s[c++]=128|r>>6&63,s[c++]=128|63&r):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++i)),s[c++]=240|r>>18,s[c++]=128|r>>12&63,s[c++]=128|r>>6&63,s[c++]=128|63&r);e=s}else{if("object"!==o)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR)}e.length>64&&(e=new Sha256(t,!0).update(e).array());var u=[],l=[];for(i=0;i<64;++i){var d=e[i]||0;u[i]=92^d,l[i]=54^d}Sha256.call(this,t,n),this.update(l),this.oKeyPad=u,this.inner=!0,this.sharedMemory=n}Sha256.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR);t=!0}for(var i,o,r=0,s=e.length,a=this.blocks;r<s;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),t)for(o=this.start;r<s&&o<64;++r)a[o>>2]|=e[r]<<SHIFT[3&o++];else for(o=this.start;r<s&&o<64;++r)(i=e.charCodeAt(r))<128?a[o>>2]|=i<<SHIFT[3&o++]:i<2048?(a[o>>2]|=(192|i>>6)<<SHIFT[3&o++],a[o>>2]|=(128|63&i)<<SHIFT[3&o++]):i<55296||i>=57344?(a[o>>2]|=(224|i>>12)<<SHIFT[3&o++],a[o>>2]|=(128|i>>6&63)<<SHIFT[3&o++],a[o>>2]|=(128|63&i)<<SHIFT[3&o++]):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++r)),a[o>>2]|=(240|i>>18)<<SHIFT[3&o++],a[o>>2]|=(128|i>>12&63)<<SHIFT[3&o++],a[o>>2]|=(128|i>>6&63)<<SHIFT[3&o++],a[o>>2]|=(128|63&i)<<SHIFT[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=a[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var e,t,n,i,o,r,s,a,c,u=this.h0,l=this.h1,d=this.h2,h=this.h3,f=this.h4,p=this.h5,m=this.h6,g=this.h7,_=this.blocks;for(e=16;e<64;++e)t=((o=_[e-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,n=((o=_[e-2])>>>17|o<<15)^(o>>>19|o<<13)^o>>>10,_[e]=_[e-16]+t+_[e-7]+n<<0;for(c=l&d,e=0;e<64;e+=4)this.first?(this.is224?(r=300032,g=(o=_[0]-1413257819)-150054599<<0,h=o+24177077<<0):(r=704751109,g=(o=_[0]-210244248)-1521486534<<0,h=o+143694565<<0),this.first=!1):(t=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),i=(r=u&l)^u&d^c,g=h+(o=g+(n=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&p^~f&m)+K[e]+_[e])<<0,h=o+(t+i)<<0),t=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),i=(s=h&u)^h&l^r,m=d+(o=m+(n=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&f^~g&p)+K[e+1]+_[e+1])<<0,t=((d=o+(t+i)<<0)>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),i=(a=d&h)^d&u^s,p=l+(o=p+(n=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&g^~m&f)+K[e+2]+_[e+2])<<0,t=((l=o+(t+i)<<0)>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),i=(c=l&d)^l&h^a,f=u+(o=f+(n=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&m^~p&g)+K[e+3]+_[e+3])<<0,u=o+(t+i)<<0;this.h0=this.h0+u<<0,this.h1=this.h1+l<<0,this.h2=this.h2+d<<0,this.h3=this.h3+h<<0,this.h4=this.h4+f<<0,this.h5=this.h5+p<<0,this.h6=this.h6+m<<0,this.h7=this.h7+g<<0},Sha256.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,i=this.h3,o=this.h4,r=this.h5,s=this.h6,a=this.h7,c=HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s];return this.is224||(c+=HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]),c},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,i=this.h3,o=this.h4,r=this.h5,s=this.h6,a=this.h7,c=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,i>>24&255,i>>16&255,i>>8&255,255&i,o>>24&255,o>>16&255,o>>8&255,255&o,r>>24&255,r>>16&255,r>>8&255,255&r,s>>24&255,s>>16&255,s>>8&255,255&s];return this.is224||c.push(a>>24&255,a>>16&255,a>>8&255,255&a),c},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()}).call(this,__webpack_require__(8),__webpack_require__(9))},function(e,t){var n,i,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var c,u=[],l=!1,d=-1;function h(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&f())}function f(){if(!l){var e=a(h);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){const i=n(2),o=n(3),r=n(1),s=n(0),{AutoDiscover:a}=n(13),{funnelsHandler:c}=n(15),u=e=>{window.navigator.geolocation.getCurrentPosition((function(t){const n=i.infoGeoloc("html5",t.coords.latitude,t.coords.longitude,4);(n.geolocation_type!==sessionStorage.audience_geoloc_geolocationType||n.latitude-parseFloat(sessionStorage.audience_geoloc_latitude)>1||n.longitude-parseFloat(sessionStorage.audience_geoloc_longitude)>1)&&(o.post(i.createEvent(n,e),s.config.apiEndpointHostname+"/event/geoloc"),sessionStorage.audience_geoloc_geolocationType=n.geolocation_type,sessionStorage.audience_geoloc_latitude=n.latitude,sessionStorage.audience_geoloc_longitude=n.longitude)}),(function(){}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:1e3})},l={setupGeolocListener:function(e){window.navigator.permissions&&window.navigator.permissions.query({name:"geolocation"}).then((function(t){"granted"===t.state?u(e):t.onchange=(e=>()=>u(e))(e)}))},setupAllowedFormListener:function(e){const t=s.config.submitEvents.submitForms.whitelist.filter(e=>r.valueIsContainedInCurrentLocation(e.url,window.location));l.setupWhitelistedFormListener(t,e)},setupWhitelistedFormListener:function(e,t){document.body.addEventListener("submit",(function(n){e.map((function(e){if(!n.target.matches("form"+e.selector))return;const r=i.infoSubmitEvent(window.location.href,Array.from(n.target),e),a=i.createEvent(r,t);o.post(a,s.config.apiEndpointHostname+"/event/submit",!1)}))}),!0)},setupAllowedSubmitLinkListeners:function(e){const t=s.config.submitEvents.submitLinks.whitelist.filter(e=>r.valueIsContainedInCurrentLocation(e.url,window.location));this.setupWhitelistedSubmitLinkListeners(t,e)},setupWhitelistedSubmitLinkListeners:function(e,t){e.forEach((function(e){document.body.addEventListener("click",n=>{if(!n.target.matches(e.button))return;let r=[];if(""!==e.container){const t=document.querySelector(e.container);null!==t&&(r=t.querySelectorAll("input"))}const a=i.infoSubmitEvent(window.location.href,Array.from(r),e),c=i.createEvent(a,t);c.form.length>0&&o.post(c,s.config.apiEndpointHostname+"/event/submit",!1)},!0)}))},setupAutoDiscoverInputs(e){const t=window.location.href,n={email:null,phone:null},r=new a({selector:s.config.autoDiscover.selector,trackEvent:s.config.autoDiscover.trackEvent,timeout:s.config.autoDiscover.timeout,typesToCapture:s.config.autoDiscover.typesToCapture,emailRE:s.config.autoDiscover.emailRE,phoneRE:s.config.autoDiscover.phoneRE});function c(){if(null!==n.email||null!==n.phone){const r=i.createEvent(i.autoDiscoverEvent(t,n),e);o.post(r,s.config.apiEndpointHostname+"/event/submit",!1,!0),setTimeout(()=>{n.email=null,n.phone=null},1)}}r.on("matches",(function({input:e,type:t,matches:i}){const{id:o,name:r}=e,{emails:s=[],phones:a=[]}=i;switch(t){case"email":{const e=Array.isArray(s)&&s[0]?s[0]:null;n.email={id:o,name:r,value:e};break}case"tel":case"phone":{const e=Array.isArray(a)&&a[0]?a[0]:null;n.phone={id:o,name:r,value:e};break}case"text":default:if(null===n.email&&Array.isArray(s)&&s[0]){const e=s[0];n.email={id:o,name:r,value:e}}if(null===n.phone&&Array.isArray(a)&&a[0]){const e=a[0];n.phone={id:o,name:r,value:e}}}})),r.on("locationChange",c),window.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&c()}),window.addEventListener("beforeunload",c),r.start()},setupFunnelListeners(e){const t=()=>{c(e)};if("MutationObserver"in window){let e=window.location.href;const n=new MutationObserver(()=>{e!==window.location.href&&(e=window.location.href,t())}),i=document.querySelector("body");n.observe(i,{childList:!0,subtree:!0})}t()},setupXandrPixel(e){if(null!==document.getElementById("__xandr_pixel_id__"))return;const{protocol:t}=window.location,{apiEndpointHostname:n,xandr:i={}}=s.config,o="https:"===t?"https://secure.adnxs.com/getuid":"http://ib.adnxs.com/getuid",{brandSlug:r="sync-xandr",module:a="pview",autoRemove:c=!1}=i,u=new URLSearchParams(Object.entries(e));u.set("client_id","$UID"),u.delete("created_at"),u.delete("session_id"),u.set("brand_slug",r),u.set("module",a);const l=document.createElement("img");l.id="__xandr_pixel_id__",l.src=`${o}?${n}/pixel.png?${u.toString()}`,l.width="1px",l.height="1px",document.body.appendChild(l),!0===c&&setTimeout(()=>{document.body.removeChild(l)},2e3)}};e.exports=l},function(e,t){const n={blacklistedTypes:[/password/i,/submit/i],blacklistedValues:[/^(?![\s\S])/,/^true$/i,/^false$/i,/^test$/i,/aa/i,/aaa/i,/^nom$/i,/^prenom$/i,/^prénom$/i,/^anonymous$/i],blacklistedInputNames:[/token/i,/captcha_id/i],fakePhoneNumber:/(\d)\1{6,}|(0\d|\d0)\2{3}|0123456|1234567|2345678|0203040|1020304/i,fakeEmail:/^(?![a-z0-9._%+-]+@[a-z0-9._-]+\.[a-z]{2,}).*$|^test@|@test\.|^x+@/i,inputIsBlacklisted(e){return this.blacklistedTypes.some(t=>t.test(e.type))||this.blacklistedValues.some(t=>t.test(e.value))||this.blacklistedInputNames.some(t=>t.test(e.name))},valueIsFake(e){const t=e.replace(/\s/g,"");return/^\+?\d+$/.test(t)&&t.length>9?this.fakePhoneNumber.test(t):t.indexOf("@")>1?this.fakeEmail.test(t):this.blacklistedValues.some(e=>e.test(t))},elemIsAllowedInConfiguration:(e,t)=>t.fields.some(t=>t.id&&-1!==e.id.indexOf(t.id)||t.name&&-1!==e.name.indexOf(t.name)||""===t.id&&""===t.name)};e.exports=n},function(e,t,n){const{EventEmitter:i}=n(14),o=/(?<email>(^([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$)/gim,r=[/(?<phoneNumber>^(?:(?:\+|00)[0-9]{2,3}[\s.-]{0,3}(?:\(0\)[\s.-]{0,3})?|0)[1-9](?:(?:[\s.-]?\d{2}){4}|\d{2}(?:[\s.-]?\d{3}){2})$)/gim,/(?<phoneNumber>^[\+]?[(]?[0-9]{2,3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$)/gim,/(?<phoneNumber>^(1\s?)?(\d{3}|\(\d{3}\))[\s\-]?\d{3}[\s\-]?\d{4}$)/gim],s=["email","tel","text","number"],a=100,c="blur",u="body";e.exports={AutoDiscover:class extends i{constructor(e={}){super();const{selector:t=u,trackEvent:n=c,timeout:i=a,typesToCapture:l=s}=e;this.config=Object.assign({},e,{selector:t,trackEvent:n,timeout:i,typesToCapture:l,emailRE:e.emailRE?new RegExp(e.emailRE,"gmi"):o});const d=e.phoneRE?new RegExp(e.phoneRE,"gmi"):r;this.config.emailRES=Array.isArray(d)?d:[d],this._inputListeners=new Map,this._observer=null,this._timeoutId=null,this._currentUrl=null}cleanup(){this._inputListeners.forEach(e=>e()),this._inputListeners.clear(),this._observer&&this._observer.disconnect(),this._observer=null,this._currentUrl=null}start(){if(!("MutationObserver"in window))return;this.cleanup(),this._currentUrl=window.location.href,this._observer=new MutationObserver(e=>{this._currentUrl!==window.location.href&&(this._currentUrl=window.location.href,this.emit("locationChange",this._currentUrl));for(const t of e)"childList"===t.type&&(this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=setTimeout(()=>{this._handleDomChange()},this.config.timeout))});const e=document.querySelector(this.config.selector);this._observer.observe(e,{childList:!0,subtree:!0}),this._handleDomChange()}_handleDomChange(){const e=Array.from(document.querySelectorAll("input")).filter(e=>this.config.typesToCapture.includes(e.type));for(const t of e){if(this._inputListeners.has(t))continue;const e=this._listen(t);this._inputListeners.set(t,e)}}_listen(e){const t=t=>{const{value:n,type:i}=t.target;if(n.length>0){const t=this._extractMatches(n,i);t&&(t.emails||t.phones)&&this.emit("matches",{href:window.location.href,input:e,type:i,matches:t})}};return e.addEventListener(this.config.trackEvent,t,{passive:!0}),()=>{e.removeEventListener(this.config.trackEvent,t,{passive:!0}),this._inputListeners.delete(e)}}_extractMatches(e,t){switch(t){case"email":return{emails:e.match(this.config.emailRE)};case"tel":{let t;for(const n of this.config.emailRES)if(t=e.match(n),null!==t)break;return{phones:t}}case"text":default:{const t=e.match(this.config.emailRE);let n;for(const t of this.config.emailRES)if(n=e.match(t),null!==n)break;return{emails:t,phones:n}}}}}}},function(e,t,n){"use strict";var i,o="object"==typeof Reflect?Reflect:null,r=o&&"function"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};i=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function d(e,t,n,i){var o,r,s,a;if(u(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),s=r[t]),void 0===s)s=r[t]=n,++e._eventsCount;else if("function"==typeof s?s=r[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(o=l(e))>0&&s.length>o&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=h.bind(i);return o.listener=n,i.wrapFn=o,o}function p(e,t,n){var i=e._events;if(void 0===i)return[];var o=i[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):g(o,o.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var u=c.length,l=g(c,u);for(n=0;n<u;++n)r(l[n],this,t)}return!0},a.prototype.addListener=function(e,t){return d(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return d(this,e,t,!0)},a.prototype.once=function(e,t){return u(t),this.on(e,f(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,f(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,i,o,r,s;if(u(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){s=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,r=Object.keys(n);for(i=0;i<r.length;++i)"removeListener"!==(o=r[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(e,t,n){const i=n(0),o=n(2),r=n(3);function s(e,t){return Array.from(t).map(t=>t.replace(/\[([^\[\]]*)\]/g,".$1.").split(".").filter(e=>""!==e).reduce((e,t)=>e&&e[t],e)).filter(Boolean)}var a={captureGtm(e,t){if(!e||!window[e]||!Array.isArray(t)||0===t.length)return{};return(()=>{for(const n of window[e]){const e=s(n,t);if(e.length)return t.reduce((t,n,i)=>(t[n]=e[i],t),{})}return{}})()}};e.exports={funnelsHandler:function(e){const{funnel:t}=i.config;if(!t)return;const{funnels:n=[]}=t;for(const t of n){const{steps:n=[],onFunnelFullfilled:s={}}=t;if(!n||0===n.length||!s||!s.handler)return;if(!n.map(e=>new RegExp(e,"i")).some(e=>e.test(window.location.href)))return;const{handler:c,args:u,mapper:l}=s,d=a[c];if(!d)return;const h=d(u[0],u.slice(1)),f={};for(const[e,t]of Object.entries(l))h[e]&&(f[t]=h[e]);if(!Object.keys(f).length)return;const p=Object.entries(f).map(([e,t])=>({name:e,value:t,type:isNaN(parseInt(t,10))?"text":"number"})),m=o.createEvent({id:window.location.href,form:p},e);r.post(m,i.config.apiEndpointHostname+"/event/submit",!0,!0)}}}},function(e,t,n){var i=n(17),o=n(18);e.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||i)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[r+a]=s[a];return t||o(s)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);e.exports=function(){return n(i),i}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,o=n;return[o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]]].join("")}},function(e,t,n){const i=n(5),o=n(0);function r(e){for(const t in o.config)/dimension/.test(t)&&e.set(t,s.getCustomDimensionValues(o.config[t]))}const s={checkIfHasGA:function(){return""!==o.config.uaSuivi||!1===o.config.blockSt},initGA:function(){s.includeGAScript(),""!==o.config.uaSuivi&&s.createClientTracker(),!1===o.config.blockSt&&s.createSTTracker()},includeGAScript:function(){var e,t,n,i,o,r;e=window,t=document,n="script",i="ga",e.GoogleAnalyticsObject=i,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,o=t.createElement(n),r=t.getElementsByTagName(n)[0],o.async=1,o.src="https://www.google-analytics.com/analytics.js",r.parentNode.insertBefore(o,r)},createClientTracker:function(){ga((function(){r(ga.create({trackingId:o.config.uaSuivi,cookieDomain:"auto",name:"clientTracker",campaignId:o.config.campaignId}))}))},createSTTracker:function(){ga((function(){r(ga.create({trackingId:"UA-114934277-1",cookieDomain:"auto",name:"STTracker",campaignId:o.config.campaignId}))}))},sendGaPageViewEvent:function(){""!==o.config.uaSuivi&&ga("clientTracker.send","pageview"),!1===o.config.blockSt&&ga("STTracker.send","pageview")},getCustomDimensionValues:function(e){switch(e){case"sessionId":case"sessionid":return i.initOrGetUuidV4(sessionStorage,"st_audience_sessionId",900);case"clientId":case"clientid":return i.initOrGetUuidV4(localStorage,"st_audience_clientId",33696e3);default:return""}}};e.exports=s}]);